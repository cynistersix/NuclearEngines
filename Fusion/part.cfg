PART
{
name = WB8Supernova
module = Part
author = Angel-125

mesh = Supernova.mu
scale = 1
rescaleFactor = 1

node_stack_top = 0.0, 5.2, 0.0, 0.0, 1.0, 0.0
node_stack_bottom = 0.0, -4.25, 0.0, 0.0, 1.0, 0.0
node_attach = 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 1

fx_exhaustFlame_blue = 0.0, -0.8, 0.0, 0.0, 1.0, 0.0, running
fx_exhaustLight_blue = 0.0, -0.8, 0.0, 0.0, 0.0, 1.0, running
fx_smokeTrail_light = 0.0, -0.8, 0.0, 0.0, 1.0, 0.0, running

sound_vent_medium = engage
sound_rocket_hard = running
sound_vent_soft = disengage
sound_explosion_low = flameout

TechRequired = experimentalRocketry
entryCost = 98000
cost = 64000
category = Propulsion
subcategory = 0
title = Supernova Fusion Engine
manufacturer = Wild Blue Industries
description = Harness the power of an exploding sun! Well, a tiny artificial sun-like blob of fusion fire that exists for microseconds. The WB-8 Supernova concentrates its Waxon-Waxoff Corporation electromagnets, focusing their power into a crushing blow that fuses fusion pellets into white hot plasma. The plasma then mixes with propellant pumped through the engine's center, which is then ejected out the magnetic nozzle to produce thrust. Alternately, switch to pure fusion pellet pulsed plasma power for lower thrust and higher ISP. The Supernova needs a significant amount of electric charge to start up, and the reactor's fusion pellets will need periodic replenishment, and well, there's this heat problem...

// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
attachRules = 1,1,1,1,0

mass = 50
dragModelType = default
maximum_drag = 0.2
minimum_drag = 0.2
angularDrag = 2
crashTolerance = 12
maxTemp = 4000

stagingIcon = LIQUID_ENGINE

MODULE
{
    name = MultiFuelSwitcher
    enableLogging = True

    PROPELLANT_TYPE
    {
        gaugeName = LiquidFuel
        contextName = Liquid Fuel
        contextToggleName = Use fusion pellets
        aslISP = 125
        vacISP = 3500
        maxThrust = 1800
        minThrust = 0
//        directThrottleEffectName
//        disengageEffectName
//        engageEffectName
//        flameoutEffectName
//        powerEffectName
//        runningEffectName
//        engineID

        PROPELLANT
        {
            name = LiquidFuel
            ratio = 1.0
            DraWGauge = True
        }
    }

    PROPELLANT_TYPE
    {
        gaugeName = FusionPellets
        contextName = Liquid Fuel/Oxidizer
        contextToggleName = Use liquid hydrogen
        aslISP = 226
        vacISP = 35000
        maxThrust = 600
        minThrust = 0

        PROPELLANT
        {
            name = FusionPellets
            ratio = 1.0
            DrawGauge = False
        }
    }

    PROPELLANT_TYPE
    {
        gaugeName = LiquidHydrogen
        contextName = Liquid Hydrogen
        contextToggleName = Use liquid fuel
        aslISP = 125
        vacISP = 4200
        maxThrust = 1650
        minThrust = 0

        PROPELLANT
        {
            name = LiquidHydrogen
            ratio = 1.0
            DraWGauge = True
        }
    }
}

//TODO: Upgrade to ModuleEnginesFX
MODULE
{
	name = ModuleEngines
	thrustVectorTransformName = thrustTransform
	exhaustDamage = True
	ignitionThreshold = 0.1
	minThrust = 0
	maxThrust = 1800
	heatProduction = 600
	fxOffset = 0, 0, 0.3
	PROPELLANT
	{
		name = LiquidFuel
        	ratio = 0.9
		DrawGauge = True
	}
	atmosphereCurve
 	{
   	 key = 0 125
  	 key = 1 3500
 	}
	
}

}
